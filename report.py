import os
import time
import json

def file_analyst(task_id):
    check = "Report not found"
    result = ""

    while (check == "Report not found"):

        # Chạy lệnh 'ls' trên terminal và lấy kết quả
        result = os.popen(f'curl -H "Authorization: Bearer p8Cs7He1iiEKthpXHdFZcQ" http://localhost:8090/tasks/report/{task_id}').read()
        result = json.loads(result)

        check = result["message"] if "message" in result else ""
        time.sleep(10)
    return result

# print("Output of 'ls -l' command:")
# result = file_analyst(47)
# print(result)
